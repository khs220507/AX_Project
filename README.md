# AX Project — AI 기반 전국 상권분석 플랫폼

> 소상공인을 위한 AI 경영 컨설팅 솔루션

---

## 1. 프로젝트 개요

AX Project는 **서울시 열린데이터**와 **소상공인시장진흥공단(SEMAS)** 공공 API를 실시간으로 연동하여, 전국 17개 시도의 상권을 분석하고 소상공인에게 데이터 기반 경영 인사이트를 제공하는 AI 플랫폼입니다.

### 핵심 가치
| 구분 | 설명 |
|------|------|
| **실시간 데이터 연동** | 서울 열린데이터 7종 + SEMAS 전국 점포 데이터를 실시간 수집·분석 |
| **AI 분석 모델 8종** | 수요예측, 고객특성, 배달최적화, 메뉴트렌드, 생존예측, 재무진단, 경영전략, 경영팁 |
| **NLP 감성분석** | KR-FinBert-SC 기반 소상공인 뉴스 트렌드 감성분석 |
| **매출 예측** | 선형회귀 + 계절성 분해 기반 분기별 매출 예측 |
| **지구유형 분류** | 직장인구/상주인구 비율 기반 업무지구·주택지구·혼합지구 자동 분류 |
| **정부 정책 매칭** | 업종별 맞춤 정부지원정책 자동 추천 |

---

## 2. 시스템 아키텍처

```
┌─────────────────────────────────────────────────────┐
│                    Frontend (React)                   │
│  Vite + TypeScript + TailwindCSS + Recharts + Leaflet│
│                    localhost:3000                      │
└──────────────────────┬──────────────────────────────┘
                       │ REST API (Proxy)
┌──────────────────────▼──────────────────────────────┐
│                   Backend (FastAPI)                    │
│      Python 3.11 + Uvicorn + httpx (async)            │
│                   localhost:8000                       │
└────┬─────────┬──────────┬──────────┬────────────────┘
     │         │          │          │
     ▼         ▼          ▼          ▼
┌────────┐ ┌───────┐ ┌────────┐ ┌──────────┐
│ 서울시  │ │ SEMAS │ │ 네이버  │ │ 기업마당  │
│열린데이터│ │전국점포│ │뉴스 API│ │정책 API  │
│ 7종 API │ │데이터  │ │        │ │          │
└────────┘ └───────┘ └────────┘ └──────────┘
```

---

## 3. 주요 기능

### 3.1 입지분석 (8대 지표 종합 평가)

상권별 8개 핵심 지표를 가중 평가하여 0~100점 종합 입지점수를 산출합니다.

| 지표 | 가중치 | 데이터 소스 | 설명 |
|------|--------|-------------|------|
| 유동인구 | 20% | VwsmTrdarFlpopQq | 시간대별·성별·연령별 유동인구 분석 |
| 매출규모 | 18% | VwsmTrdarSelngQq | 업종별 월평균 매출액 규모 |
| 경쟁강도 | 15% | VwsmTrdarStorQq | 동종업종 점포 밀집도 (역산) |
| 성장성 | 12% | 다중분기 매출 | 전분기 대비 매출 성장률 |
| 안정성 | 8% | 다중분기 점포 | 개폐업 비율 기반 생존 안정성 |
| 집객력 | 8% | VwsmTrdarSelngQq | 건당 결제금액 × 건수 |
| 인프라 | 10% | VwsmTrdarFcltyQq | 지하철·버스·학교·병원 등 집객시설 |
| 상권활력 | 9% | VwsmTrdarIxQq | 상권변화지표 (HH/HL/LH/LL) |

### 3.2 AI 분석 모델 8종

| 모델 | 기능 | 주요 산출물 |
|------|------|-------------|
| **수요예측** | 시간대별 유동인구 기반 수요 예측 | 피크 시간대, 요일별 지수, 계절성 패턴 |
| **고객특성 분석** | 성별·연령 기반 타깃 고객 프로파일링 | 주요 고객층, 성별 비율, 연령대 분포 |
| **배달 최적화** | 배달 수요 vs 매장 비중 분석 | 배달 비중, 추천 배달 시간대, 최적 전략 |
| **메뉴 트렌드** | 업종별 매출 트렌드 및 경쟁 분석 | 성장 업종, 경쟁 포화도, 틈새 업종 추천 |
| **생존 예측** | 개폐업 데이터 기반 3년 생존율 예측 | 1/2/3년 생존율, 위험 요인, 유사 상권 비교 |
| **재무 진단** | 매출·임대료 기반 손익분기 분석 | 월 추정매출, 임대료, 손익분기점, BEP |
| **경영전략** | 8대 지표 기반 맞춤 경영전략 도출 | SWOT 분석, 핵심전략 3가지, 실행 로드맵 |
| **경영팁** | 업종·고객·재무 데이터 종합 경영 조언 | 마케팅, 운영, 재무, 고객관리 팁 |

### 3.3 지구유형 분류 (업무/주택/혼합)

서울시 직장인구·상주인구 데이터를 활용하여 상권의 지구유형을 자동 분류합니다.

```
직장인구 / 상주인구 > 2.0  →  업무지구 (오피스 밀집)
직장인구 / 상주인구 < 0.5  →  주택지구 (주거 밀집)
그 외                       →  혼합지구
```

지구유형에 따라 타깃 고객, 피크 시간대, 메뉴 전략이 달라지므로 창업 의사결정에 핵심 정보를 제공합니다.

### 3.4 매출 예측 엔진

- **선형회귀**: 과거 8분기 매출 데이터 기반 추세선 도출
- **계절성 분해**: 분기별 계절 패턴 적용 (1Q~4Q)
- **신뢰구간**: 상/하한 예측값 제공

### 3.5 NLP 뉴스 감성분석

| 구성요소 | 기술 | 설명 |
|----------|------|------|
| 감성분석 모델 | snunlp/KR-FinBert-SC | 한국어 금융/비즈니스 특화 감성분석 |
| 형태소 분석기 | kiwipiepy | 한국어 키워드 추출 (NNG, NNP 명사) |
| 뉴스 소스 | 네이버 뉴스 검색 | 소상공인 관련 실시간 뉴스 수집 |

### 3.6 정부지원정책 자동 추천

기업마당(Bizinfo) API 연동 + 12개 정적 정책 DB를 통해 업종별 맞춤 정부지원정책을 자동 매칭합니다.

- **자금지원**: 정책자금, 경영안정자금, 소공인 특화지원
- **교육/컨설팅**: 경영교육, 전문 컨설팅
- **디지털**: 스마트상점, 온라인 판로
- **재기지원**: 채무조정, 재창업 패키지

### 3.7 전국 17개 시도 지원

| 모드 | 데이터 | 기능 |
|------|--------|------|
| **서울 모드** | 서울 열린데이터 7종 API | 상권별 상세 입지분석, 8대 지표, AI 모델 8종 |
| **비서울 모드** | SEMAS 전국 점포 데이터 | 동별 점포 밀도, 업종 분포, 경쟁 분석 |

### 3.8 인터랙티브 지도

- **Leaflet 기반** 다크모드 지도 (CARTO Dark 타일)
- **행정동 단위** 코로플레스 맵 (점수별 색상 그라데이션)
- **지역 경계 잠금**: 선택한 시도 경계 내에서만 이동 가능
- **시도별 최적 줌/바운더리** 자동 설정

---

## 4. 기술 스택

### Backend
| 기술 | 용도 |
|------|------|
| **Python 3.11** | 서버 언어 |
| **FastAPI** | 비동기 REST API 프레임워크 |
| **Uvicorn** | ASGI 서버 |
| **httpx** | 비동기 HTTP 클라이언트 (커넥션 풀링) |
| **asyncio** | 병렬 API 호출 (gather + Lock) |
| **Pydantic v2** | 데이터 검증 및 직렬화 |
| **Transformers** | KR-FinBert-SC 감성분석 모델 |
| **kiwipiepy** | 한국어 형태소 분석 |
| **BeautifulSoup4** | 뉴스 크롤링 |
| **NumPy** | 수치 연산 (회귀분석, 예측) |

### Frontend
| 기술 | 용도 |
|------|------|
| **React 18** | UI 프레임워크 |
| **TypeScript** | 타입 안전성 |
| **Vite** | 빌드 도구 (HMR) |
| **TailwindCSS v4** | 유틸리티 CSS |
| **Recharts** | 차트 (레이더, 라인, 바, 파이) |
| **Leaflet / react-leaflet** | 인터랙티브 지도 |
| **Axios** | HTTP 클라이언트 |

---

## 5. API 엔드포인트

### 서울 상권 분석
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/areas` | 상권 목록 조회 (검색/필터/업종별 점수) |
| GET | `/api/areas/{code}` | 상권 상세 (유동인구, 점포수, 매출, 지구유형) |
| GET | `/api/analysis/{code}` | 입지분석 (8대 지표 + 지구유형 + 폐업률 + 미진출 업종) |
| GET | `/api/models/{code}` | AI 분석 모델 8종 |
| GET | `/api/trends/{code}` | 8분기 매출·유동인구·점포 트렌드 |
| POST | `/api/predict` | 매출 예측 (선형회귀 + 계절성) |
| GET | `/api/compare` | 다중 상권 비교 분석 |

### 전국 분석
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/regions` | 전국 17개 시도 목록 |
| GET | `/api/regions/{sido}/dongs` | 시도별 동 단위 점포 데이터 |
| GET | `/api/regions/{sido}/analysis/{dong}` | 동 단위 상세 분석 |
| GET | `/api/geojson/{sido}` | 시도별 행정동 GeoJSON |

### 부가 서비스
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/policies` | 정부지원정책 조회 (업종별 매칭) |
| GET | `/api/news/trend` | 소상공인 뉴스 트렌드 + NLP 감성분석 |
| GET | `/api/business-types` | 업종 코드 목록 |
| GET | `/api/area-types` | 상권유형 목록 |

---

## 6. 데이터 소스

### 서울시 열린데이터 (7종)
| 서비스명 | API ID | 데이터 |
|----------|--------|--------|
| 추정매출 | VwsmTrdarSelngQq | 업종별 매출액, 결제건수, 단가 |
| 유동인구 | VwsmTrdarFlpopQq | 시간대·성별·연령별 유동인구 |
| 점포수 | VwsmTrdarStorQq | 업종별 점포수, 개업·폐업 수 |
| 집객시설 | VwsmTrdarFcltyQq | 지하철, 버스, 학교, 병원 등 |
| 상권변화지표 | VwsmTrdarIxQq | 상권 활력 지수 (HH/HL/LH/LL) |
| 직장인구 | VwsmTrdarWrcPopltnQq | 상권별 직장인구 (성별·연령) |
| 상주인구 | VwsmTrdarRepopQq | 상권별 상주인구, 세대수 |

### 외부 데이터
| 소스 | 데이터 | 용도 |
|------|--------|------|
| SEMAS (소상공인시장진흥공단) | 전국 점포 현황 | 비서울 지역 상권 분석 |
| 네이버 뉴스 | 소상공인 관련 뉴스 | NLP 감성분석 |
| 기업마당 (Bizinfo) | 정부지원정책 | 업종별 정책 매칭 |

---

## 7. 프로젝트 구조

```
AX_Project/
├── backend/
│   ├── main.py                          # FastAPI 앱 진입점
│   ├── config.py                        # 환경변수 설정
│   ├── models/
│   │   └── schemas.py                   # Pydantic 스키마 (30+ 모델)
│   ├── routers/
│   │   ├── areas.py                     # 상권 목록/상세
│   │   ├── analysis.py                  # 입지분석
│   │   ├── models.py                    # AI 분석 모델 8종
│   │   ├── trends.py                    # 트렌드 조회
│   │   ├── prediction.py                # 매출 예측
│   │   ├── compare.py                   # 상권 비교
│   │   ├── regions.py                   # 전국 시도/동
│   │   ├── geojson.py                   # GeoJSON 제공
│   │   ├── news.py                      # 뉴스 트렌드
│   │   └── policy.py                    # 정부정책
│   └── services/
│       ├── seoul_api.py                 # 서울 열린데이터 클라이언트 (비동기, 병렬)
│       ├── semas_api.py                 # SEMAS 전국 점포 클라이언트
│       ├── data_processor.py            # 점수 계산, 지구유형 분류 엔진
│       ├── advanced_models.py           # AI 분석 모델 8종 (1,000+ lines)
│       ├── prediction_service.py        # 매출 예측 (회귀 + 계절성)
│       ├── news_nlp.py                  # NLP 감성분석 (KR-FinBert-SC)
│       └── policy_service.py            # 정책 매칭 서비스
│
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   │   ├── layout/
│   │   │   │   └── DashboardLayout.tsx  # 메인 대시보드 레이아웃
│   │   │   ├── map/
│   │   │   │   ├── RegionMap.tsx        # 인터랙티브 지도 (Leaflet)
│   │   │   │   ├── SeoulMap.tsx         # 서울 전용 지도
│   │   │   │   └── AreaMarker.tsx       # 상권 마커
│   │   │   ├── filters/
│   │   │   │   └── FilterPanel.tsx      # 검색/필터 패널
│   │   │   └── analysis/
│   │   │       ├── AnalysisPanel.tsx     # 7탭 분석 패널 (600+ lines)
│   │   │       ├── ScoreGauge.tsx        # 입지점수 게이지
│   │   │       ├── RadarBreakdown.tsx    # 8축 레이더 차트
│   │   │       ├── CustomerProfileCard.tsx # 고객 특성
│   │   │       ├── DemandChart.tsx       # 수요예측 차트
│   │   │       ├── DeliveryOptCard.tsx   # 배달 최적화
│   │   │       ├── MenuTrendCard.tsx     # 메뉴 트렌드
│   │   │       ├── SurvivalCard.tsx      # 생존 예측
│   │   │       ├── FinancialDiagCard.tsx # 재무 진단
│   │   │       ├── StrategyCard.tsx      # 경영전략
│   │   │       ├── BusinessTipsCard.tsx  # 경영팁
│   │   │       ├── PolicyCard.tsx        # 정부정책
│   │   │       ├── NewsTrendCard.tsx     # 뉴스 트렌드
│   │   │       ├── PredictionChart.tsx   # 매출 예측 차트
│   │   │       ├── SalesTrendChart.tsx   # 매출 트렌드
│   │   │       ├── ClosureStatsCard.tsx  # 개폐업 현황
│   │   │       └── StoreCategoryChart.tsx # 업종 분포
│   │   ├── hooks/
│   │   │   ├── useAnalysis.ts           # 입지분석 데이터 패칭
│   │   │   ├── useAdvancedModels.ts     # AI 모델 데이터 패칭
│   │   │   ├── useAreas.ts             # 상권 목록 패칭
│   │   │   ├── usePrediction.ts        # 매출 예측 패칭
│   │   │   ├── useNewsTrend.ts         # 뉴스 트렌드 패칭
│   │   │   ├── useNationwideAreas.ts   # 전국 동 데이터 패칭
│   │   │   ├── useNationwideAnalysis.ts # 전국 분석 패칭
│   │   │   └── useRegionGeoJson.ts     # GeoJSON 패칭
│   │   ├── api/
│   │   │   └── client.ts               # Axios API 클라이언트
│   │   ├── types/
│   │   │   └── index.ts                # 전체 타입 정의 (300+ lines)
│   │   └── utils/
│   │       ├── colors.ts               # 점수→색상 매핑
│   │       └── geo.ts                  # GeoJSON 유틸리티
│   ├── public/
│   │   └── seoul_dong.geojson          # 서울 행정동 경계 데이터
│   └── package.json
│
└── README.md
```

---

## 8. 성능 최적화

### 비동기 병렬 처리
- **2-Level 병렬화**: 라우터 레벨(분기별 병렬) + 클라이언트 레벨(페이지별 병렬)
- **asyncio.gather**: 최대 7개 API를 동시 호출
- **asyncio.Lock**: 동일 요청 중복 방지 (Dedup Lock)
- **httpx 커넥션 풀**: max_connections=20, keep_alive=10

### 캐싱
- **인메모리 캐시**: TTL 1시간, 키 기반 자동 만료
- **Lock 기반 캐시 보호**: 동시 요청 시 1회만 실제 호출

### 성능 수치
| 지표 | 최적화 전 | 최적화 후 |
|------|-----------|-----------|
| 트렌드 API 응답 | 67초 | 32초 (콜드) / <1초 (캐시) |
| 분석 API 응답 | 45초+ | 15~20초 (콜드) / <1초 (캐시) |
| 동시 API 호출 | 1개 (순차) | 최대 7개 (병렬) |

---

## 9. 실행 방법

### Backend
```bash
cd backend
pip install fastapi uvicorn httpx pydantic beautifulsoup4 kiwipiepy transformers torch
# .env 파일에 API 키 설정
echo "SEOUL_API_KEY=your_key" > .env
python -m uvicorn main:app --host 127.0.0.1 --port 8000
```

### Frontend
```bash
cd frontend
npm install
npm run dev
# → http://localhost:3000
```

### 환경변수
| 변수 | 필수 | 설명 |
|------|------|------|
| `SEOUL_API_KEY` | O | 서울 열린데이터 API 인증키 |
| `DATA_GO_KR_API_KEY` | △ | 공공데이터포털 API 키 (전국 기능) |
| `BIZINFO_API_KEY` | △ | 기업마당 정책 API 키 |

---

## 10. UI 화면 구성

### 대시보드 레이아웃
```
┌─────────────────────────────────────────────────┐
│  AX  전국 상권분석 대시보드                        │
├─────────────────────────────────────────────────┤
│ [시도▾] [자치구▾] [업종▾] [상권유형▾] [검색...]   │
├──────────────────────┬──────────────────────────┤
│                      │ [종합|고객|매출|생존|전략|정책|팁] │
│                      │                          │
│     인터랙티브 지도    │     입지점수 게이지       │
│   (코로플레스 맵)     │     지구유형 배지         │
│                      │     8축 레이더 차트       │
│   행정동 단위 색상     │     개폐업 현황          │
│   점수별 그라데이션    │     AI 분석 카드         │
│                      │     매출 예측 차트        │
│   범례               │     정부지원정책          │
│                      │     경영팁               │
└──────────────────────┴──────────────────────────┘
```

### 분석 패널 7탭 구성
| 탭 | 내용 |
|----|------|
| **종합** | 입지점수, 지구유형(업무/주택/혼합), 8축 레이더차트, 개폐업 현황 |
| **고객·수요** | 고객 특성 분석, 수요예측 차트, 뉴스 트렌드 |
| **매출·재무** | 매출 트렌드, 매출 예측, 재무 진단 (임대료·손익분기) |
| **생존·경쟁** | 생존율 예측, 배달 최적화, 메뉴 트렌드 |
| **전략** | AI 경영전략 (SWOT + 핵심전략 + 로드맵) |
| **정책** | 정부지원정책 목록 (자금/교육/컨설팅/디지털/재기) |
| **경영팁** | 업종 맞춤 경영 조언 (마케팅/운영/재무/고객관리) |

---

## 11. 차별화 포인트

### vs 기존 상권분석 서비스 (소상공인마당, 상권정보시스템)
| 비교 항목 | 기존 서비스 | AX Project |
|-----------|-------------|------------|
| 분석 범위 | 단일 상권 조회 | 전국 17개 시도 통합 |
| 분석 깊이 | 기본 통계 (유동인구, 매출) | AI 모델 8종 + NLP 감성분석 |
| 지구유형 | 미제공 | 업무/주택/혼합 자동 분류 |
| 경영전략 | 미제공 | SWOT + 로드맵 + 실행전략 |
| 매출 예측 | 미제공 | 회귀분석 + 계절성 예측 |
| 정책 매칭 | 별도 검색 필요 | 업종별 자동 추천 |
| 실시간성 | 분기 단위 갱신 | API 실시간 연동 |
| 인터랙션 | 정적 보고서 | 인터랙티브 지도 + 대시보드 |

---

## 12. 향후 확장 계획

- [ ] 실시간 POS 데이터 연동 (매출 실시간 모니터링)
- [ ] GPT 기반 자연어 경영 컨설팅 챗봇
- [ ] 상권 추천 엔진 (조건 기반 최적 입지 추천)
- [ ] 모바일 앱 (React Native)
- [ ] 임대료 실거래가 데이터 연동
- [ ] 상권 변화 알림 서비스 (Push 알림)
- [ ] 다중 상권 비교 리포트 PDF 출력

---

## 13. 라이선스

본 프로젝트는 교육 및 연구 목적으로 개발되었습니다.
서울시 열린데이터 및 공공데이터는 각 기관의 이용약관을 따릅니다.

---

> **AX Project** — 데이터로 시작하는 소상공인의 성공 전략
